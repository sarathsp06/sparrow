# Docker Compose configuration for OpenTelemetry observability stack
# Run with: docker-compose -f docker-compose.observability.yml up -d

version: '3.8'

services:

  # OpenTelemetry Collector
  otel-collector:
    image: otel/opentelemetry-collector-contrib:0.89.0
    container_name: sparrow-otel-collector
    command: ["--config=/etc/otel-collector-config.yml"]
    volumes:
      - ./otel-collector-config.yml:/etc/otel-collector-config.yml
    ports:
      - "4317:4317"   # OTLP gRPC receiver
      - "4318:4318"   # OTLP HTTP receiver
    # Only depends_on essentials if needed
    networks:
      - observability


networks:
  observability:
    driver: bridge